{"ast":null,"code":"import React,{useEffect}from\"react\";import{useDispatch,useSelector}from\"react-redux\";import ErrorMessage from\"../../messages/ErrorMessage\";import{Button,Table,Row,Col}from\"react-bootstrap\";import Loading from\"../../messages/Loading\";import{productDeleteAction}from\"./../../actions/productListActions\";import{productListAction,productCreateAction}from\"../../actions/productListActions\";import{LinkContainer}from\"react-router-bootstrap\";import{PRODUCT_CREATE_RESET,PRODUCT_DELETE_RESET}from\"./../../constants/constants\";import Paginate from\"../Paginate\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var ProductListScreen=function ProductListScreen(_ref){var history=_ref.history,match=_ref.match;var dispatch=useDispatch();var pageNumber=match.params.pageNumber||1;//for an individual user\nvar userLogin=useSelector(function(state){return state.userLogin;});var userInfo=userLogin.userInfo;var productList=useSelector(function(state){return state.productList;});var products=productList.products,page=productList.page,pages=productList.pages;var productDelete=useSelector(function(state){return state.productDelete;});var successDelete=productDelete.success,errorDelete=productDelete.error,loadingDelete=productDelete.loading;var productCreate=useSelector(function(state){return state.productCreate;});var successCreate=productCreate.success,errorCreate=productCreate.error,loadingCreate=productCreate.loading,createdProduct=productCreate.product;useEffect(function(){// if (successDelete) {\n// \tdispatch(productListAction());\n// }\n//only display or list all products if the user is an admin\n//we are doing userInfo && userInfo.isAdmin to avoid errors\ndispatch({type:PRODUCT_CREATE_RESET});//This would clear the form field after a product is created\nif(!userInfo.isAdmin){history.push(\"/login\");}//if product is successfully created\nif(successCreate){//newly created product /edit\nhistory.push(\"/admin/product/\".concat(createdProduct._id,\"/edit\"));}else{dispatch(productListAction(\"\",pageNumber));}},[dispatch,successDelete,createdProduct,successCreate,userInfo,history,pageNumber]);var deleteHandler=function deleteHandler(id){if(window.confirm(\"Are you sure\")){dispatch(productDeleteAction(id));}else{/*#__PURE__*/_jsx(ErrorMessage,{variant:\"danger\",children:\" Product Not Deleted\"});}};var createProductHandler=function createProductHandler(){dispatch(productCreateAction());};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(Row,{className:\"align-items-center\",children:[/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsx(\"h1\",{children:\"Products\"})}),/*#__PURE__*/_jsx(Col,{className:\"text-right\",children:/*#__PURE__*/_jsxs(Button,{onClick:createProductHandler,children:[\" \",/*#__PURE__*/_jsx(\"i\",{className:\"fas-fa-plus\"}),\"Create Product\"]})})]}),loadingCreate&&/*#__PURE__*/_jsx(Loading,{}),errorCreate&&/*#__PURE__*/_jsx(ErrorMessage,{variant:\"danger\",children:errorCreate}),loadingDelete?/*#__PURE__*/_jsx(Loading,{}):errorDelete?/*#__PURE__*/_jsx(ErrorMessage,{variant:\"danger\",children:errorDelete}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(Table,{striped:true,bordered:true,hover:true,responsive:true,className:\"table-sm\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"ID\"}),/*#__PURE__*/_jsx(\"th\",{children:\"NAME\"}),/*#__PURE__*/_jsx(\"th\",{children:\"PRICE\"}),/*#__PURE__*/_jsx(\"th\",{children:\"CATEGORY\"}),/*#__PURE__*/_jsx(\"th\",{children:\"BRAND\"}),/*#__PURE__*/_jsx(\"th\",{children:\"DELIVERED\"}),/*#__PURE__*/_jsx(\"th\",{children:\"edit/delete\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:products.map(function(product,idx){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:product._id}),/*#__PURE__*/_jsx(\"td\",{children:product.name}),/*#__PURE__*/_jsxs(\"td\",{children:[\" \\u20A6 \",product.price.toLocaleString(\"en\")]}),/*#__PURE__*/_jsxs(\"td\",{children:[\" \",product.category]}),/*#__PURE__*/_jsxs(\"td\",{children:[\" \",product.brand]}),/*#__PURE__*/_jsx(\"td\",{children:product.isDelivered?/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-check\",style:{color:\"green\"}}):/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-times\",style:{color:\"red\"}})}),/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsx(LinkContainer,{to:\"/admin/product/\".concat(product._id,\"/edit\"),children:/*#__PURE__*/_jsx(Button,{variant:\"light\",className:\"btn-sm\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-edit\"})})}),/*#__PURE__*/_jsx(Button,{variant:\"trash\",className:\"btn-sm\",onClick:function onClick(){return deleteHandler(product._id);},children:/*#__PURE__*/_jsx(\"i\",{style:{color:\"red\"},className:\"fas fa-trash\"})})]})]},idx);})})]}),/*#__PURE__*/_jsx(Paginate,{pages:pages,page:page,isAdmin:true})]})]});};export default ProductListScreen;","map":{"version":3,"sources":["C:/Users/user/Desktop/Proshop Ecommerce/frontend/frontend/src/components/screen/ProductListScreen.jsx"],"names":["React","useEffect","useDispatch","useSelector","ErrorMessage","Button","Table","Row","Col","Loading","productDeleteAction","productListAction","productCreateAction","LinkContainer","PRODUCT_CREATE_RESET","PRODUCT_DELETE_RESET","Paginate","ProductListScreen","history","match","dispatch","pageNumber","params","userLogin","state","userInfo","productList","products","page","pages","productDelete","successDelete","success","errorDelete","error","loadingDelete","loading","productCreate","successCreate","errorCreate","loadingCreate","createdProduct","product","type","isAdmin","push","_id","deleteHandler","id","window","confirm","createProductHandler","map","idx","name","price","toLocaleString","category","brand","isDelivered","color"],"mappings":"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","sourcesContent":["import React, { useEffect } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport ErrorMessage from \"../../messages/ErrorMessage\";\r\nimport { Button, Table, Row, Col } from \"react-bootstrap\";\r\nimport Loading from \"../../messages/Loading\";\r\nimport { productDeleteAction } from \"./../../actions/productListActions\";\r\nimport {\r\n\tproductListAction,\r\n\tproductCreateAction,\r\n} from \"../../actions/productListActions\";\r\nimport { LinkContainer } from \"react-router-bootstrap\";\r\nimport {\r\n\tPRODUCT_CREATE_RESET,\r\n\tPRODUCT_DELETE_RESET,\r\n} from \"./../../constants/constants\";\r\nimport Paginate from \"../Paginate\";\r\nconst ProductListScreen = ({ history, match }) => {\r\n\tconst dispatch = useDispatch();\r\n\tconst pageNumber = match.params.pageNumber || 1;\r\n\r\n\t//for an individual user\r\n\tconst userLogin = useSelector((state) => state.userLogin);\r\n\tconst { userInfo } = userLogin;\r\n\tconst productList = useSelector((state) => state.productList);\r\n\tconst { products, page, pages } = productList;\r\n\tconst productDelete = useSelector((state) => state.productDelete);\r\n\tconst {\r\n\t\tsuccess: successDelete,\r\n\t\terror: errorDelete,\r\n\t\tloading: loadingDelete,\r\n\t} = productDelete;\r\n\r\n\tconst productCreate = useSelector((state) => state.productCreate);\r\n\tconst {\r\n\t\tsuccess: successCreate,\r\n\t\terror: errorCreate,\r\n\t\tloading: loadingCreate,\r\n\t\tproduct: createdProduct,\r\n\t} = productCreate;\r\n\r\n\tuseEffect(() => {\r\n\t\t// if (successDelete) {\r\n\t\t// \tdispatch(productListAction());\r\n\t\t// }\r\n\t\t//only display or list all products if the user is an admin\r\n\t\t//we are doing userInfo && userInfo.isAdmin to avoid errors\r\n\r\n\t\tdispatch({ type: PRODUCT_CREATE_RESET }); //This would clear the form field after a product is created\r\n\t\tif (!userInfo.isAdmin) {\r\n\t\t\thistory.push(\"/login\");\r\n\t\t}\r\n\r\n\t\t//if product is successfully created\r\n\t\tif (successCreate) {\r\n\t\t\t//newly created product /edit\r\n\t\t\thistory.push(`/admin/product/${createdProduct._id}/edit`);\r\n\t\t} else {\r\n\t\t\tdispatch(productListAction(\"\", pageNumber));\r\n\t\t}\r\n\t}, [\r\n\t\tdispatch,\r\n\t\tsuccessDelete,\r\n\t\tcreatedProduct,\r\n\t\tsuccessCreate,\r\n\t\tuserInfo,\r\n\t\thistory,\r\n\t\tpageNumber,\r\n\t]);\r\n\r\n\tconst deleteHandler = (id) => {\r\n\t\tif (window.confirm(\"Are you sure\")) {\r\n\t\t\tdispatch(productDeleteAction(id));\r\n\t\t} else {\r\n\t\t\t<ErrorMessage variant=\"danger\"> Product Not Deleted</ErrorMessage>;\r\n\t\t}\r\n\t};\r\n\r\n\tconst createProductHandler = () => {\r\n\t\tdispatch(productCreateAction());\r\n\t};\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<Row className=\"align-items-center\">\r\n\t\t\t\t<Col>\r\n\t\t\t\t\t<h1>Products</h1>\r\n\t\t\t\t</Col>\r\n\t\t\t\t<Col className=\"text-right\">\r\n\t\t\t\t\t<Button onClick={createProductHandler}>\r\n\t\t\t\t\t\t{\" \"}\r\n\t\t\t\t\t\t<i className=\"fas-fa-plus\"></i>Create Product\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</Col>\r\n\t\t\t</Row>\r\n\t\t\t{loadingCreate && <Loading />}\r\n\t\t\t{errorCreate && (\r\n\t\t\t\t<ErrorMessage variant=\"danger\">{errorCreate}</ErrorMessage>\r\n\t\t\t)}\r\n\t\t\t{loadingDelete ? (\r\n\t\t\t\t<Loading />\r\n\t\t\t) : errorDelete ? (\r\n\t\t\t\t<ErrorMessage variant=\"danger\">{errorDelete}</ErrorMessage>\r\n\t\t\t) : (\r\n\t\t\t\t<>\r\n\t\t\t\t\t<Table striped bordered hover responsive className=\"table-sm\">\r\n\t\t\t\t\t\t<thead>\r\n\t\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t\t<th>ID</th>\r\n\t\t\t\t\t\t\t\t<th>NAME</th>\r\n\r\n\t\t\t\t\t\t\t\t<th>PRICE</th>\r\n\t\t\t\t\t\t\t\t<th>CATEGORY</th>\r\n\t\t\t\t\t\t\t\t<th>BRAND</th>\r\n\t\t\t\t\t\t\t\t<th>DELIVERED</th>\r\n\t\t\t\t\t\t\t\t<th>edit/delete</th>\r\n\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t</thead>\r\n\t\t\t\t\t\t<tbody>\r\n\t\t\t\t\t\t\t{products.map((product, idx) => (\r\n\t\t\t\t\t\t\t\t<tr key={idx}>\r\n\t\t\t\t\t\t\t\t\t<td>{product._id}</td>\r\n\t\t\t\t\t\t\t\t\t<td>{product.name}</td>\r\n\r\n\t\t\t\t\t\t\t\t\t<td> &#8358; {product.price.toLocaleString(\"en\")}</td>\r\n\t\t\t\t\t\t\t\t\t<td> {product.category}</td>\r\n\t\t\t\t\t\t\t\t\t<td> {product.brand}</td>\r\n\t\t\t\t\t\t\t\t\t<td>\r\n\t\t\t\t\t\t\t\t\t\t{product.isDelivered ? (\r\n\t\t\t\t\t\t\t\t\t\t\t<i\r\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"fas fa-check\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tstyle={{ color: \"green\" }}\r\n\t\t\t\t\t\t\t\t\t\t\t></i>\r\n\t\t\t\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t\t\t\t<i className=\"fas fa-times\" style={{ color: \"red\" }}></i>\r\n\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t<td>\r\n\t\t\t\t\t\t\t\t\t\t<LinkContainer to={`/admin/product/${product._id}/edit`}>\r\n\t\t\t\t\t\t\t\t\t\t\t<Button variant=\"light\" className=\"btn-sm\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<i className=\"fas fa-edit\"></i>\r\n\t\t\t\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t\t\t\t</LinkContainer>\r\n\r\n\t\t\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\t\t\tvariant=\"trash\"\r\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"btn-sm\"\r\n\t\t\t\t\t\t\t\t\t\t\tonClick={() => deleteHandler(product._id)}\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t<i style={{ color: \"red\" }} className=\"fas fa-trash\"></i>\r\n\t\t\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t</tbody>\r\n\t\t\t\t\t</Table>\r\n\t\t\t\t\t<Paginate pages={pages} page={page} isAdmin={true} />\r\n\t\t\t\t</>\r\n\t\t\t)}\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default ProductListScreen;\r\n"]},"metadata":{},"sourceType":"module"}