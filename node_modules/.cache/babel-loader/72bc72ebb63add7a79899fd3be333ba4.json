{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/user/Desktop/Proshop Ecommerce/frontend/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/user/Desktop/Proshop Ecommerce/frontend/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import{PRODUCT_LIST_FAIL,PRODUCT_LIST_REQUEST,PRODUCT_LIST_SUCCESS,PRODUCT_DETAILS_SUCCESS,PRODUCT_DETAILS_FAIL,PRODUCT_DETAILS_REQUEST,PRODUCT_DELETE_REQUEST,PRODUCT_DELETE_SUCCESS,PRODUCT_DELETE_FAIL,PRODUCT_CREATE_REQUEST,PRODUCT_CREATE_SUCCESS,PRODUCT_CREATE_FAIL,PRODUCT_UPDATE_REQUEST,PRODUCT_UPDATE_SUCCESS,PRODUCT_UPDATE_FAIL,PRODUCT_REVIEW_SUCCESS,PRODUCT_REVIEW_FAIL,PRODUCT_REVIEW_REQUEST,PRODUCT_TOP_REQUEST,PRODUCT_TOP_SUCCESS,PRODUCT_TOP_FAIL}from\"./../constants/constants\";import axios from\"axios\";//This handles every product rendered on the UI\nexport var productListAction=function productListAction(){var keyword=arguments.length>0&&arguments[0]!==undefined?arguments[0]:\"\";var pageNumber=arguments.length>1&&arguments[1]!==undefined?arguments[1]:\"\";return/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(dispatch){var _yield$axios$get,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:dispatch({type:PRODUCT_LIST_REQUEST});_context.prev=1;_context.next=4;return axios.get(\"/api/products?keyword=\".concat(keyword,\"&pageNumber=\").concat(pageNumber));case 4:_yield$axios$get=_context.sent;data=_yield$axios$get.data;dispatch({type:PRODUCT_LIST_SUCCESS,payload:data});_context.next=12;break;case 9:_context.prev=9;_context.t0=_context[\"catch\"](1);//Dispatching error, if there is a custom error, fire that one, else use generic error\ndispatch({type:PRODUCT_LIST_FAIL,payload:_context.t0.response&&_context.t0.response.data.message?_context.t0.data.message:_context.t0.message});case 12:case\"end\":return _context.stop();}}},_callee,null,[[1,9]]);}));return function(_x){return _ref.apply(this,arguments);};}();};export var listTopProduct=function listTopProduct(){return/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(dispatch){var _yield$axios$get2,data;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:dispatch({type:PRODUCT_TOP_REQUEST});_context2.prev=1;_context2.next=4;return axios.get(\"/api/products/top\");case 4:_yield$axios$get2=_context2.sent;data=_yield$axios$get2.data;dispatch({type:PRODUCT_TOP_SUCCESS,payload:data});_context2.next=12;break;case 9:_context2.prev=9;_context2.t0=_context2[\"catch\"](1);//Dispatching error, if there is a custom error, fire that one, else use generic error\ndispatch({type:PRODUCT_TOP_FAIL,payload:_context2.t0.response&&_context2.t0.response.data.message?_context2.t0.data.message:_context2.t0.message});case 12:case\"end\":return _context2.stop();}}},_callee2,null,[[1,9]]);}));return function(_x2){return _ref2.apply(this,arguments);};}();};export var productDetailsAction=function productDetailsAction(id){return/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(dispatch){var _yield$axios$get3,data;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:dispatch({type:PRODUCT_DETAILS_REQUEST});_context3.prev=1;_context3.next=4;return axios.get(\"/api/products/\".concat(id));case 4:_yield$axios$get3=_context3.sent;data=_yield$axios$get3.data;dispatch({type:PRODUCT_DETAILS_SUCCESS,payload:data});_context3.next=12;break;case 9:_context3.prev=9;_context3.t0=_context3[\"catch\"](1);//Dispatching error, if there is a custom error, fire that one, else use generic error\ndispatch({type:PRODUCT_DETAILS_FAIL,payload:_context3.t0.response&&_context3.t0.response.data.message?_context3.t0.data.message:_context3.t0.message});case 12:case\"end\":return _context3.stop();}}},_callee3,null,[[1,9]]);}));return function(_x3){return _ref3.apply(this,arguments);};}();};export var productDeleteAction=function productDeleteAction(productId){return/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(dispatch,getState){var _getState,userInfo,config;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:dispatch({type:PRODUCT_DELETE_REQUEST});_context4.prev=1;//getting the userInfo i.e Token from state so you could access the user's profile\n_getState=getState(),userInfo=_getState.userLogin.userInfo;config={headers:{Authorization:\"Bearer \".concat(userInfo.token,\" \")}};// user._id is from the database, user is the object we wanna send to database for updating\n_context4.next=6;return axios.delete(\"/api/products/\".concat(productId),config);case 6:dispatch({type:PRODUCT_DELETE_SUCCESS});//dispatch({ type: USER_DETAILS_SUCCESS, payload: data });\n_context4.next=12;break;case 9:_context4.prev=9;_context4.t0=_context4[\"catch\"](1);dispatch({type:PRODUCT_DELETE_FAIL,payload:_context4.t0});case 12:case\"end\":return _context4.stop();}}},_callee4,null,[[1,9]]);}));return function(_x4,_x5){return _ref4.apply(this,arguments);};}();};export var productCreateAction=function productCreateAction(){return/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(dispatch,getState){var _getState2,userInfo,config,_yield$axios$post,data;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0://no need for any parameters\ndispatch({type:PRODUCT_CREATE_REQUEST});_context5.prev=1;//getting the userInfo i.e Token from state so you could access the user's profile\n_getState2=getState(),userInfo=_getState2.userLogin.userInfo;config={headers:{Authorization:\"Bearer \".concat(userInfo.token,\" \")}};// we just pass a large empty object to create products\n_context5.next=6;return axios.post(\"/api/products\",{},config);case 6:_yield$axios$post=_context5.sent;data=_yield$axios$post.data;console.log(\"created : \",data);dispatch({type:PRODUCT_CREATE_SUCCESS,payload:data});_context5.next=15;break;case 12:_context5.prev=12;_context5.t0=_context5[\"catch\"](1);dispatch({type:PRODUCT_CREATE_FAIL,payload:_context5.t0});case 15:case\"end\":return _context5.stop();}}},_callee5,null,[[1,12]]);}));return function(_x6,_x7){return _ref5.apply(this,arguments);};}();};export var productUpdateAction=function productUpdateAction(product){return/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(dispatch,getState){var _getState3,userInfo,config,_yield$axios$put,data;return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0://product is what you wanna update\ndispatch({type:PRODUCT_UPDATE_REQUEST});_context6.prev=1;//getting the userInfo i.e Token from state so you could access the user's profile\n_getState3=getState(),userInfo=_getState3.userLogin.userInfo;config={headers:{\"Content-Type\":\"application/json\",Authorization:\"Bearer \".concat(userInfo.token,\" \")}};// we just pass a large empty object to UPDATE products\n_context6.next=6;return axios.put(\"/api/products/\".concat(product._id),product,config);case 6:_yield$axios$put=_context6.sent;data=_yield$axios$put.data;dispatch({type:PRODUCT_UPDATE_SUCCESS,payload:data});_context6.next=14;break;case 11:_context6.prev=11;_context6.t0=_context6[\"catch\"](1);dispatch({type:PRODUCT_UPDATE_FAIL,payload:_context6.t0});case 14:case\"end\":return _context6.stop();}}},_callee6,null,[[1,11]]);}));return function(_x8,_x9){return _ref6.apply(this,arguments);};}();};export var createProductReview=function createProductReview(productId,review){return/*#__PURE__*/function(){var _ref7=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee7(dispatch,getState){var _getState4,userInfo,config;return _regeneratorRuntime.wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0://product is what you wanna update\ndispatch({type:PRODUCT_REVIEW_REQUEST});_context7.prev=1;//getting the userInfo i.e Token from state so you could access the user's profile\n_getState4=getState(),userInfo=_getState4.userLogin.userInfo;config={headers:{\"Content-Type\":\"application/json\",Authorization:\"Bearer \".concat(userInfo.token,\" \")}};// we just pass a review object to create review, this serves as body\n_context7.next=6;return axios.put(\"/api/products/\".concat(productId,\"/reviews\"),review,config);case 6://you dont need a payload, just success if true\ndispatch({type:PRODUCT_REVIEW_SUCCESS});_context7.next=12;break;case 9:_context7.prev=9;_context7.t0=_context7[\"catch\"](1);dispatch({type:PRODUCT_REVIEW_FAIL,payload:_context7.t0});case 12:case\"end\":return _context7.stop();}}},_callee7,null,[[1,9]]);}));return function(_x10,_x11){return _ref7.apply(this,arguments);};}();};","map":{"version":3,"sources":["C:/Users/user/Desktop/Proshop Ecommerce/frontend/frontend/src/actions/productListActions.js"],"names":["PRODUCT_LIST_FAIL","PRODUCT_LIST_REQUEST","PRODUCT_LIST_SUCCESS","PRODUCT_DETAILS_SUCCESS","PRODUCT_DETAILS_FAIL","PRODUCT_DETAILS_REQUEST","PRODUCT_DELETE_REQUEST","PRODUCT_DELETE_SUCCESS","PRODUCT_DELETE_FAIL","PRODUCT_CREATE_REQUEST","PRODUCT_CREATE_SUCCESS","PRODUCT_CREATE_FAIL","PRODUCT_UPDATE_REQUEST","PRODUCT_UPDATE_SUCCESS","PRODUCT_UPDATE_FAIL","PRODUCT_REVIEW_SUCCESS","PRODUCT_REVIEW_FAIL","PRODUCT_REVIEW_REQUEST","PRODUCT_TOP_REQUEST","PRODUCT_TOP_SUCCESS","PRODUCT_TOP_FAIL","axios","productListAction","keyword","pageNumber","dispatch","type","get","data","payload","response","message","listTopProduct","productDetailsAction","id","productDeleteAction","productId","getState","userInfo","userLogin","config","headers","Authorization","token","delete","productCreateAction","post","console","log","productUpdateAction","product","put","_id","createProductReview","review"],"mappings":"6VAAA,OACCA,iBADD,CAECC,oBAFD,CAGCC,oBAHD,CAICC,uBAJD,CAKCC,oBALD,CAMCC,uBAND,CAOCC,sBAPD,CAQCC,sBARD,CASCC,mBATD,CAUCC,sBAVD,CAWCC,sBAXD,CAYCC,mBAZD,CAaCC,sBAbD,CAcCC,sBAdD,CAeCC,mBAfD,CAgBCC,sBAhBD,CAiBCC,mBAjBD,CAkBCC,sBAlBD,CAmBCC,mBAnBD,CAoBCC,mBApBD,CAqBCC,gBArBD,KAsBO,0BAtBP,CAuBA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CAEA;AACA,MAAO,IAAMC,CAAAA,iBAAiB,CAAG,QAApBA,CAAAA,iBAAoB,MAACC,CAAAA,OAAD,2DAAW,EAAX,IAAeC,CAAAA,UAAf,2DAA4B,EAA5B,gGAAmC,iBACnEC,QADmE,4IAGnEA,QAAQ,CAAC,CAAEC,IAAI,CAAEzB,oBAAR,CAAD,CAAR,CAHmE,sCAO3CoB,CAAAA,KAAK,CAACM,GAAN,iCACGJ,OADH,wBACyBC,UADzB,EAP2C,uCAO1DI,IAP0D,kBAO1DA,IAP0D,CAWlEH,QAAQ,CAAC,CAAEC,IAAI,CAAExB,oBAAR,CAA8B2B,OAAO,CAAED,IAAvC,CAAD,CAAR,CAXkE,+EAalE;AACAH,QAAQ,CAAC,CACRC,IAAI,CAAE1B,iBADE,CAER6B,OAAO,CACN,YAAMC,QAAN,EAAkB,YAAMA,QAAN,CAAeF,IAAf,CAAoBG,OAAtC,CACG,YAAMH,IAAN,CAAWG,OADd,CAEG,YAAMA,OALF,CAAD,CAAR,CAdkE,oEAAnC,gEAA1B,CAwBP,MAAO,IAAMC,CAAAA,cAAc,CAAG,QAAjBA,CAAAA,cAAiB,mGAAM,kBAAOP,QAAP,iJACnCA,QAAQ,CAAC,CAAEC,IAAI,CAAER,mBAAR,CAAD,CAAR,CADmC,wCAKXG,CAAAA,KAAK,CAACM,GAAN,qBALW,yCAK1BC,IAL0B,mBAK1BA,IAL0B,CAOlCH,QAAQ,CAAC,CAAEC,IAAI,CAAEP,mBAAR,CAA6BU,OAAO,CAAED,IAAtC,CAAD,CAAR,CAPkC,mFASlC;AACAH,QAAQ,CAAC,CACRC,IAAI,CAAEN,gBADE,CAERS,OAAO,CACN,aAAMC,QAAN,EAAkB,aAAMA,QAAN,CAAeF,IAAf,CAAoBG,OAAtC,CACG,aAAMH,IAAN,CAAWG,OADd,CAEG,aAAMA,OALF,CAAD,CAAR,CAVkC,sEAAN,kEAAvB,CAoBP,MAAO,IAAME,CAAAA,oBAAoB,CAAG,QAAvBA,CAAAA,oBAAuB,CAACC,EAAD,kGAAQ,kBAAOT,QAAP,iJAC3CA,QAAQ,CAAC,CAAEC,IAAI,CAAErB,uBAAR,CAAD,CAAR,CAD2C,wCAInBgB,CAAAA,KAAK,CAACM,GAAN,yBAA2BO,EAA3B,EAJmB,yCAIlCN,IAJkC,mBAIlCA,IAJkC,CAM1CH,QAAQ,CAAC,CAAEC,IAAI,CAAEvB,uBAAR,CAAiC0B,OAAO,CAAED,IAA1C,CAAD,CAAR,CAN0C,mFAQ1C;AACAH,QAAQ,CAAC,CACRC,IAAI,CAAEtB,oBADE,CAERyB,OAAO,CACN,aAAMC,QAAN,EAAkB,aAAMA,QAAN,CAAeF,IAAf,CAAoBG,OAAtC,CACG,aAAMH,IAAN,CAAWG,OADd,CAEG,aAAMA,OALF,CAAD,CAAR,CAT0C,sEAAR,kEAA7B,CAmBP,MAAO,IAAMI,CAAAA,mBAAmB,CAAG,QAAtBA,CAAAA,mBAAsB,CAACC,SAAD,kGAAe,kBACjDX,QADiD,CAEjDY,QAFiD,oJAIjDZ,QAAQ,CAAC,CAAEC,IAAI,CAAEpB,sBAAR,CAAD,CAAR,CAJiD,iBAMhD;AANgD,UAS5C+B,QAAQ,EAToC,CAQlCC,QARkC,WAQ/CC,SAR+C,CAQlCD,QARkC,CAW1CE,MAX0C,CAWjC,CACdC,OAAO,CAAE,CACRC,aAAa,kBAAYJ,QAAQ,CAACK,KAArB,KADL,CADK,CAXiC,CAgBhD;AAhBgD,uBAiB1CtB,CAAAA,KAAK,CAACuB,MAAN,yBAA8BR,SAA9B,EAA2CI,MAA3C,CAjB0C,QAkBhDf,QAAQ,CAAC,CAAEC,IAAI,CAAEnB,sBAAR,CAAD,CAAR,CACA;AAnBgD,mFAqBhDkB,QAAQ,CAAC,CAAEC,IAAI,CAAElB,mBAAR,CAA6BqB,OAAO,aAApC,CAAD,CAAR,CArBgD,sEAAf,sEAA5B,CAyBP,MAAO,IAAMgB,CAAAA,mBAAmB,CAAG,QAAtBA,CAAAA,mBAAsB,mGAAM,kBAAOpB,QAAP,CAAiBY,QAAjB,4KACxC;AACAZ,QAAQ,CAAC,CAAEC,IAAI,CAAEjB,sBAAR,CAAD,CAAR,CAFwC,iBAIvC;AAJuC,WAOnC4B,QAAQ,EAP2B,CAMzBC,QANyB,YAMtCC,SANsC,CAMzBD,QANyB,CASjCE,MATiC,CASxB,CACdC,OAAO,CAAE,CACRC,aAAa,kBAAYJ,QAAQ,CAACK,KAArB,KADL,CADK,CATwB,CAcvC;AAduC,uBAehBtB,CAAAA,KAAK,CAACyB,IAAN,iBAA4B,EAA5B,CAAgCN,MAAhC,CAfgB,yCAe/BZ,IAf+B,mBAe/BA,IAf+B,CAgBvCmB,OAAO,CAACC,GAAR,CAAY,YAAZ,CAA0BpB,IAA1B,EACAH,QAAQ,CAAC,CAAEC,IAAI,CAAEhB,sBAAR,CAAgCmB,OAAO,CAAED,IAAzC,CAAD,CAAR,CAjBuC,qFAmBvCH,QAAQ,CAAC,CAAEC,IAAI,CAAEf,mBAAR,CAA6BkB,OAAO,aAApC,CAAD,CAAR,CAnBuC,uEAAN,sEAA5B,CAuBP,MAAO,IAAMoB,CAAAA,mBAAmB,CAAG,QAAtBA,CAAAA,mBAAsB,CAACC,OAAD,kGAAa,kBAAOzB,QAAP,CAAiBY,QAAjB,2KAC/C;AACAZ,QAAQ,CAAC,CAAEC,IAAI,CAAEd,sBAAR,CAAD,CAAR,CAF+C,iBAI9C;AAJ8C,WAO1CyB,QAAQ,EAPkC,CAMhCC,QANgC,YAM7CC,SAN6C,CAMhCD,QANgC,CASxCE,MATwC,CAS/B,CACdC,OAAO,CAAE,CACR,eAAgB,kBADR,CAERC,aAAa,kBAAYJ,QAAQ,CAACK,KAArB,KAFL,CADK,CAT+B,CAe9C;AAf8C,uBAgBvBtB,CAAAA,KAAK,CAAC8B,GAAN,yBACLD,OAAO,CAACE,GADH,EAEtBF,OAFsB,CAGtBV,MAHsB,CAhBuB,wCAgBtCZ,IAhBsC,kBAgBtCA,IAhBsC,CAsB9CH,QAAQ,CAAC,CAAEC,IAAI,CAAEb,sBAAR,CAAgCgB,OAAO,CAAED,IAAzC,CAAD,CAAR,CAtB8C,qFAwB9CH,QAAQ,CAAC,CAAEC,IAAI,CAAEZ,mBAAR,CAA6Be,OAAO,aAApC,CAAD,CAAR,CAxB8C,uEAAb,sEAA5B,CA4BP,MAAO,IAAMwB,CAAAA,mBAAmB,CAAG,QAAtBA,CAAAA,mBAAsB,CAACjB,SAAD,CAAYkB,MAAZ,kGAAuB,kBACzD7B,QADyD,CAEzDY,QAFyD,qJAIzD;AACAZ,QAAQ,CAAC,CAAEC,IAAI,CAAET,sBAAR,CAAD,CAAR,CALyD,iBAOxD;AAPwD,WAUpDoB,QAAQ,EAV4C,CAS1CC,QAT0C,YASvDC,SATuD,CAS1CD,QAT0C,CAYlDE,MAZkD,CAYzC,CACdC,OAAO,CAAE,CACR,eAAgB,kBADR,CAERC,aAAa,kBAAYJ,QAAQ,CAACK,KAArB,KAFL,CADK,CAZyC,CAkBxD;AAlBwD,uBAmBlDtB,CAAAA,KAAK,CAAC8B,GAAN,yBAA2Bf,SAA3B,aAAgDkB,MAAhD,CAAwDd,MAAxD,CAnBkD,QAoBxD;AACAf,QAAQ,CAAC,CAAEC,IAAI,CAAEX,sBAAR,CAAD,CAAR,CArBwD,mFAuBxDU,QAAQ,CAAC,CAAEC,IAAI,CAAEV,mBAAR,CAA6Ba,OAAO,aAApC,CAAD,CAAR,CAvBwD,sEAAvB,wEAA5B","sourcesContent":["import {\r\n\tPRODUCT_LIST_FAIL,\r\n\tPRODUCT_LIST_REQUEST,\r\n\tPRODUCT_LIST_SUCCESS,\r\n\tPRODUCT_DETAILS_SUCCESS,\r\n\tPRODUCT_DETAILS_FAIL,\r\n\tPRODUCT_DETAILS_REQUEST,\r\n\tPRODUCT_DELETE_REQUEST,\r\n\tPRODUCT_DELETE_SUCCESS,\r\n\tPRODUCT_DELETE_FAIL,\r\n\tPRODUCT_CREATE_REQUEST,\r\n\tPRODUCT_CREATE_SUCCESS,\r\n\tPRODUCT_CREATE_FAIL,\r\n\tPRODUCT_UPDATE_REQUEST,\r\n\tPRODUCT_UPDATE_SUCCESS,\r\n\tPRODUCT_UPDATE_FAIL,\r\n\tPRODUCT_REVIEW_SUCCESS,\r\n\tPRODUCT_REVIEW_FAIL,\r\n\tPRODUCT_REVIEW_REQUEST,\r\n\tPRODUCT_TOP_REQUEST,\r\n\tPRODUCT_TOP_SUCCESS,\r\n\tPRODUCT_TOP_FAIL,\r\n} from \"./../constants/constants\";\r\nimport axios from \"axios\";\r\n\r\n//This handles every product rendered on the UI\r\nexport const productListAction = (keyword = \"\", pageNumber = \"\") => async (\r\n\tdispatch\r\n) => {\r\n\tdispatch({ type: PRODUCT_LIST_REQUEST });\r\n\r\n\ttry {\r\n\t\t//filter the products by inputted words and pagenumber queries\r\n\t\tconst { data } = await axios.get(\r\n\t\t\t`/api/products?keyword=${keyword}&pageNumber=${pageNumber}`\r\n\t\t);\r\n\r\n\t\tdispatch({ type: PRODUCT_LIST_SUCCESS, payload: data });\r\n\t} catch (error) {\r\n\t\t//Dispatching error, if there is a custom error, fire that one, else use generic error\r\n\t\tdispatch({\r\n\t\t\ttype: PRODUCT_LIST_FAIL,\r\n\t\t\tpayload:\r\n\t\t\t\terror.response && error.response.data.message\r\n\t\t\t\t\t? error.data.message\r\n\t\t\t\t\t: error.message,\r\n\t\t});\r\n\t}\r\n};\r\n\r\nexport const listTopProduct = () => async (dispatch) => {\r\n\tdispatch({ type: PRODUCT_TOP_REQUEST });\r\n\r\n\ttry {\r\n\t\t//filter the products by inputted words and pagenumber queries\r\n\t\tconst { data } = await axios.get(`/api/products/top`);\r\n\r\n\t\tdispatch({ type: PRODUCT_TOP_SUCCESS, payload: data });\r\n\t} catch (error) {\r\n\t\t//Dispatching error, if there is a custom error, fire that one, else use generic error\r\n\t\tdispatch({\r\n\t\t\ttype: PRODUCT_TOP_FAIL,\r\n\t\t\tpayload:\r\n\t\t\t\terror.response && error.response.data.message\r\n\t\t\t\t\t? error.data.message\r\n\t\t\t\t\t: error.message,\r\n\t\t});\r\n\t}\r\n};\r\n\r\nexport const productDetailsAction = (id) => async (dispatch) => {\r\n\tdispatch({ type: PRODUCT_DETAILS_REQUEST });\r\n\r\n\ttry {\r\n\t\tconst { data } = await axios.get(`/api/products/${id}`);\r\n\r\n\t\tdispatch({ type: PRODUCT_DETAILS_SUCCESS, payload: data });\r\n\t} catch (error) {\r\n\t\t//Dispatching error, if there is a custom error, fire that one, else use generic error\r\n\t\tdispatch({\r\n\t\t\ttype: PRODUCT_DETAILS_FAIL,\r\n\t\t\tpayload:\r\n\t\t\t\terror.response && error.response.data.message\r\n\t\t\t\t\t? error.data.message\r\n\t\t\t\t\t: error.message,\r\n\t\t});\r\n\t}\r\n};\r\n\r\nexport const productDeleteAction = (productId) => async (\r\n\tdispatch,\r\n\tgetState\r\n) => {\r\n\tdispatch({ type: PRODUCT_DELETE_REQUEST });\r\n\ttry {\r\n\t\t//getting the userInfo i.e Token from state so you could access the user's profile\r\n\t\tconst {\r\n\t\t\tuserLogin: { userInfo },\r\n\t\t} = getState();\r\n\r\n\t\tconst config = {\r\n\t\t\theaders: {\r\n\t\t\t\tAuthorization: `Bearer ${userInfo.token} `,\r\n\t\t\t},\r\n\t\t};\r\n\t\t// user._id is from the database, user is the object we wanna send to database for updating\r\n\t\tawait axios.delete(`/api/products/${productId}`, config);\r\n\t\tdispatch({ type: PRODUCT_DELETE_SUCCESS });\r\n\t\t//dispatch({ type: USER_DETAILS_SUCCESS, payload: data });\r\n\t} catch (error) {\r\n\t\tdispatch({ type: PRODUCT_DELETE_FAIL, payload: error });\r\n\t}\r\n};\r\n\r\nexport const productCreateAction = () => async (dispatch, getState) => {\r\n\t//no need for any parameters\r\n\tdispatch({ type: PRODUCT_CREATE_REQUEST });\r\n\ttry {\r\n\t\t//getting the userInfo i.e Token from state so you could access the user's profile\r\n\t\tconst {\r\n\t\t\tuserLogin: { userInfo },\r\n\t\t} = getState();\r\n\r\n\t\tconst config = {\r\n\t\t\theaders: {\r\n\t\t\t\tAuthorization: `Bearer ${userInfo.token} `,\r\n\t\t\t},\r\n\t\t};\r\n\t\t// we just pass a large empty object to create products\r\n\t\tconst { data } = await axios.post(`/api/products`, {}, config);\r\n\t\tconsole.log(\"created : \", data);\r\n\t\tdispatch({ type: PRODUCT_CREATE_SUCCESS, payload: data });\r\n\t} catch (error) {\r\n\t\tdispatch({ type: PRODUCT_CREATE_FAIL, payload: error });\r\n\t}\r\n};\r\n\r\nexport const productUpdateAction = (product) => async (dispatch, getState) => {\r\n\t//product is what you wanna update\r\n\tdispatch({ type: PRODUCT_UPDATE_REQUEST });\r\n\ttry {\r\n\t\t//getting the userInfo i.e Token from state so you could access the user's profile\r\n\t\tconst {\r\n\t\t\tuserLogin: { userInfo },\r\n\t\t} = getState();\r\n\r\n\t\tconst config = {\r\n\t\t\theaders: {\r\n\t\t\t\t\"Content-Type\": \"application/json\",\r\n\t\t\t\tAuthorization: `Bearer ${userInfo.token} `,\r\n\t\t\t},\r\n\t\t};\r\n\t\t// we just pass a large empty object to UPDATE products\r\n\t\tconst { data } = await axios.put(\r\n\t\t\t`/api/products/${product._id}`,\r\n\t\t\tproduct,\r\n\t\t\tconfig\r\n\t\t);\r\n\r\n\t\tdispatch({ type: PRODUCT_UPDATE_SUCCESS, payload: data });\r\n\t} catch (error) {\r\n\t\tdispatch({ type: PRODUCT_UPDATE_FAIL, payload: error });\r\n\t}\r\n};\r\n\r\nexport const createProductReview = (productId, review) => async (\r\n\tdispatch,\r\n\tgetState\r\n) => {\r\n\t//product is what you wanna update\r\n\tdispatch({ type: PRODUCT_REVIEW_REQUEST });\r\n\ttry {\r\n\t\t//getting the userInfo i.e Token from state so you could access the user's profile\r\n\t\tconst {\r\n\t\t\tuserLogin: { userInfo },\r\n\t\t} = getState();\r\n\r\n\t\tconst config = {\r\n\t\t\theaders: {\r\n\t\t\t\t\"Content-Type\": \"application/json\",\r\n\t\t\t\tAuthorization: `Bearer ${userInfo.token} `,\r\n\t\t\t},\r\n\t\t};\r\n\t\t// we just pass a review object to create review, this serves as body\r\n\t\tawait axios.put(`/api/products/${productId}/reviews`, review, config);\r\n\t\t//you dont need a payload, just success if true\r\n\t\tdispatch({ type: PRODUCT_REVIEW_SUCCESS });\r\n\t} catch (error) {\r\n\t\tdispatch({ type: PRODUCT_REVIEW_FAIL, payload: error });\r\n\t}\r\n};\r\n"]},"metadata":{},"sourceType":"module"}