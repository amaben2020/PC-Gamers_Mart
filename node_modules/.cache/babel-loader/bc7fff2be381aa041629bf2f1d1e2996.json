{"ast":null,"code":"import _toConsumableArray from\"C:/Users/user/Desktop/Proshop Ecommerce/frontend/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import React,{useEffect}from\"react\";import{useDispatch,useSelector}from\"react-redux\";import ErrorMessage from\"./../../messages/ErrorMessage\";import{Link}from\"react-router-dom\";import{Row,Col,ListGroup,Form,Button,Card,Image}from\"react-bootstrap\";import{addToCart,removeFromCart}from\"./../../actions/cartActions.js\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var CartScreen=function CartScreen(_ref){var match=_ref.match,location=_ref.location,history=_ref.history;var dispatch=useDispatch();var cart=useSelector(function(state){return state.cart;});//set the product id variable to the selected product's id\nvar productId=match.params.id;// qty should be localhost://api/products/sans89as9s838?qty=3; 3 would be selected\nvar qty=location.search?Number(location.search.split(\"=\")[1]):1;var cartItems=cart.cartItems;console.log(cartItems);useEffect(function(){//we only wanna addToCart if there is a productId\nif(productId){dispatch(addToCart(productId,qty));}},[dispatch,productId,qty]);var removeCartHandler=function removeCartHandler(id){dispatch(removeFromCart(id));};//if loggedIn, then redirect into shipping\nvar checkoutHandler=function checkoutHandler(){history.push(\"/login?redirect=shipping\");};return/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsxs(Col,{md:8,children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Shopping Cart\"}),cartItems.length===0?/*#__PURE__*/_jsxs(ErrorMessage,{children:[\"Your cart is empty\",\" \",/*#__PURE__*/_jsx(Link,{to:\"/\",children:/*#__PURE__*/_jsx(Button,{variant:\"outline-dark py-1\",children:\" Go back\"})})]}):/*#__PURE__*/_jsx(ListGroup,{variant:\"flush\",children:cartItems.map(function(item){return/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{md:2,children:/*#__PURE__*/_jsx(Image,{src:item.image,alt:item.name,fluid:true,rounded:true})}),/*#__PURE__*/_jsx(Col,{md:3,children:/*#__PURE__*/_jsx(Link,{to:\"/products/\".concat(item.product),children:item.name})}),/*#__PURE__*/_jsxs(Col,{md:2,children:[\"\\u20A6\",item.price.toLocaleString(\"en\")]}),/*#__PURE__*/_jsx(Col,{md:2,children:/*#__PURE__*/_jsx(Form.Control,{style:{width:\" 8vw\"},as:\"select\",value:item.qty,onChange:function onChange(e){return dispatch(addToCart(item.product),Number(e.target.value));},children:_toConsumableArray(Array(item.countInStock).keys()).map(function(number){return/*#__PURE__*/_jsx(\"option\",{value:number+1,children:number+1},number+1);})})}),/*#__PURE__*/_jsx(Col,{md:2,children:/*#__PURE__*/_jsx(Button,{type:\"button\",variant:\"light\",onClick:function onClick(){return removeCartHandler(item.product);},children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-trash\",children:\" \"})})})]})},item.product);})})]}),/*#__PURE__*/_jsx(Col,{md:4,children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(ListGroup,{variant:\"flush\",children:[/*#__PURE__*/_jsxs(ListGroup.Item,{children:[/*#__PURE__*/_jsxs(\"h2\",{children:[\"Subtotal (\",cartItems.reduce(function(acc,currentValue){return acc+currentValue.qty;},0),\")\"]}),\"\\u20A6\",cartItems.reduce(function(acc,item){return acc+item.qty*item.price;},0).toFixed(2)]}),/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsx(Button,{type:\"button\",className:\"btn-block\",disabled:cartItems.length===0,onClick:checkoutHandler,children:\"Proceed To Checkout\"})})]})})})]});};export default CartScreen;","map":{"version":3,"sources":["C:/Users/user/Desktop/Proshop Ecommerce/frontend/frontend/src/components/screen/CartScreen.jsx"],"names":["React","useEffect","useDispatch","useSelector","ErrorMessage","Link","Row","Col","ListGroup","Form","Button","Card","Image","addToCart","removeFromCart","CartScreen","match","location","history","dispatch","cart","state","productId","params","id","qty","search","Number","split","cartItems","console","log","removeCartHandler","checkoutHandler","push","length","map","item","image","name","product","price","toLocaleString","width","e","target","value","Array","countInStock","keys","number","reduce","acc","currentValue","toFixed"],"mappings":"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","sourcesContent":["import React, { useEffect } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport ErrorMessage from \"./../../messages/ErrorMessage\";\r\nimport { Link } from \"react-router-dom\";\r\nimport {\r\n\tRow,\r\n\tCol,\r\n\tListGroup,\r\n\tForm,\r\n\tButton,\r\n\tCard,\r\n\tImage,\r\n} from \"react-bootstrap\";\r\nimport { addToCart, removeFromCart } from \"./../../actions/cartActions.js\";\r\n\r\nconst CartScreen = ({ match, location, history }) => {\r\n\tconst dispatch = useDispatch();\r\n\tconst cart = useSelector((state) => state.cart);\r\n\t//set the product id variable to the selected product's id\r\n\tconst productId = match.params.id;\r\n\t// qty should be localhost://api/products/sans89as9s838?qty=3; 3 would be selected\r\n\tconst qty = location.search ? Number(location.search.split(\"=\")[1]) : 1;\r\n\r\n\tconst { cartItems } = cart;\r\n\tconsole.log(cartItems);\r\n\r\n\tuseEffect(() => {\r\n\t\t//we only wanna addToCart if there is a productId\r\n\t\tif (productId) {\r\n\t\t\tdispatch(addToCart(productId, qty));\r\n\t\t}\r\n\t}, [dispatch, productId, qty]);\r\n\r\n\tconst removeCartHandler = (id) => {\r\n\t\tdispatch(removeFromCart(id));\r\n\t};\r\n\r\n\t//if loggedIn, then redirect into shipping\r\n\tconst checkoutHandler = () => {\r\n\t\thistory.push(\"/login?redirect=shipping\");\r\n\t};\r\n\r\n\treturn (\r\n\t\t<Row>\r\n\t\t\t<Col md={8}>\r\n\t\t\t\t<h1>Shopping Cart</h1>\r\n\r\n\t\t\t\t{cartItems.length === 0 ? (\r\n\t\t\t\t\t<ErrorMessage>\r\n\t\t\t\t\t\tYour cart is empty{\" \"}\r\n\t\t\t\t\t\t<Link to=\"/\">\r\n\t\t\t\t\t\t\t<Button variant=\"outline-dark py-1\"> Go back</Button>\r\n\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t</ErrorMessage>\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<ListGroup variant=\"flush\">\r\n\t\t\t\t\t\t{cartItems.map((item) => (\r\n\t\t\t\t\t\t\t<ListGroup.Item key={item.product}>\r\n\t\t\t\t\t\t\t\t<Row>\r\n\t\t\t\t\t\t\t\t\t<Col md={2}>\r\n\t\t\t\t\t\t\t\t\t\t<Image src={item.image} alt={item.name} fluid rounded />\r\n\t\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t\t<Col md={3}>\r\n\t\t\t\t\t\t\t\t\t\t<Link to={`/products/${item.product}`}>{item.name}</Link>\r\n\t\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t\t<Col md={2}>&#8358;{item.price.toLocaleString(\"en\")}</Col>\r\n\t\t\t\t\t\t\t\t\t<Col md={2}>\r\n\t\t\t\t\t\t\t\t\t\t<Form.Control\r\n\t\t\t\t\t\t\t\t\t\t\tstyle={{ width: \" 8vw\" }}\r\n\t\t\t\t\t\t\t\t\t\t\tas=\"select\"\r\n\t\t\t\t\t\t\t\t\t\t\tvalue={item.qty}\r\n\t\t\t\t\t\t\t\t\t\t\tonChange={(e) =>\r\n\t\t\t\t\t\t\t\t\t\t\t\tdispatch(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\taddToCart(item.product),\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tNumber(e.target.value)\r\n\t\t\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t{[...Array(item.countInStock).keys()].map((number) => (\r\n\t\t\t\t\t\t\t\t\t\t\t\t<option value={number + 1} key={number + 1}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{number + 1}\r\n\t\t\t\t\t\t\t\t\t\t\t\t</option>\r\n\t\t\t\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t\t\t\t</Form.Control>\r\n\t\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t\t<Col md={2}>\r\n\t\t\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\t\t\ttype=\"button\"\r\n\t\t\t\t\t\t\t\t\t\t\tvariant=\"light\"\r\n\t\t\t\t\t\t\t\t\t\t\tonClick={() => removeCartHandler(item.product)}\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t<i className=\"fas fa-trash\"> </i>\r\n\t\t\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t</Row>\r\n\t\t\t\t\t\t\t</ListGroup.Item>\r\n\t\t\t\t\t\t))}\r\n\t\t\t\t\t</ListGroup>\r\n\t\t\t\t)}\r\n\t\t\t</Col>\r\n\t\t\t<Col md={4}>\r\n\t\t\t\t<Card>\r\n\t\t\t\t\t<ListGroup variant=\"flush\">\r\n\t\t\t\t\t\t<ListGroup.Item>\r\n\t\t\t\t\t\t\t<h2>\r\n\t\t\t\t\t\t\t\tSubtotal (\r\n\t\t\t\t\t\t\t\t{cartItems.reduce(\r\n\t\t\t\t\t\t\t\t\t(acc, currentValue) => acc + currentValue.qty,\r\n\t\t\t\t\t\t\t\t\t0\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t</h2>\r\n\t\t\t\t\t\t\t&#8358;\r\n\t\t\t\t\t\t\t{cartItems\r\n\t\t\t\t\t\t\t\t.reduce((acc, item) => acc + item.qty * item.price, 0)\r\n\t\t\t\t\t\t\t\t.toFixed(2)}\r\n\t\t\t\t\t\t</ListGroup.Item>\r\n\t\t\t\t\t\t<ListGroup.Item>\r\n\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\ttype=\"button\"\r\n\t\t\t\t\t\t\t\tclassName=\"btn-block\"\r\n\t\t\t\t\t\t\t\tdisabled={cartItems.length === 0}\r\n\t\t\t\t\t\t\t\tonClick={checkoutHandler}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\tProceed To Checkout\r\n\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t</ListGroup.Item>\r\n\t\t\t\t\t</ListGroup>\r\n\t\t\t\t</Card>\r\n\t\t\t</Col>\r\n\t\t</Row>\r\n\t);\r\n};\r\n\r\nexport default CartScreen;\r\n"]},"metadata":{},"sourceType":"module"}